KappaNEURON Installation
========================

1. Install NEURON with python2.7 - see [INSTALL-neuron](./INSTALL-neuron) for details

2. Get latest version of NEURON-compatible SpatialKappa:

        git clone https://github.com/davidcsterratt/SpatialKappa
   
   Follow the SpatialKappa install instructions, including
   installation of the python interface. Make a note of the directory
   in which you installed NEURON.
   
3. Within this KappaNEURON directory:

        python2.7 setup.py install

   You can install in a different prefix too, but then you will need
   to make sure that ${PREFIX}/lib/python2.7 is in the $PYTHONPATH
   environment variable. E.g.

        PREFIX=/home/username 
        python2.7 setup.py install --prefix=${PREFIX}
        export PYTHONPATH=${PREFIX}/lib/python2.7/site-packages:$PYTHONPATH

Testing
-------

To run all tests from a Linux/Unix environment, run

    make test

from the KappaNEURON directory.

You may need to set the PYTHONPATH using the NRNPREFIX directory in
which NEURON was installed. e.g.:

    PYTHONPATH=${NRNPREFIX}/lib/python:${PYTHONPATH} python2.7 -i test_ca_pulse.py

If make is not available on your system, you can try running the
following commands:

    ./test/nrnivmodl.py
	python2.7 -i -m unittest test.TestCaAccumulation.test_injectCalcium
	python2.7 -i -m unittest test.TestCaAccumulation.test_injectCalciumGHK
	python2.7 -i -m unittest test.TestCaAccumulation.test_injectCalciumPump
	python2.7 -i -m unittest test.TestCaAccumulation.test_injectCalciumPumpGHK
	python2.7 -i -m unittest test.TestCaAccumulation.test_injectCalciumPump2

Demonstrations
--------------

# Calcium pulse #

In this demonstration calcium flows into the cell through a channel
that is opened for 10ms, there is a calcium membrane pump, and there
is passive membrane conductance. 

To run the simulation type the following at a command line:

    cd demo/ca_pulse
    ${NRNPREFIX}/x86_64/bin/nrnivmodl
    python2.7 -i test_ca_pulse_run.py

Plots should appear in which the red line (generated by the stochastic
Kappa simulation) is close to the blue line (generated by a
deterministic simulation).

# Postsynaptic proteome #

FIXME: Write this up.

<!--  LocalWords:  KappaNEURON SpatialKappa py PYTHONPATH NRNPREFIX
 -->
<!--  LocalWords:  cd proteome FIXME
 -->
